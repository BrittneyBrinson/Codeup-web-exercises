<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Weather Project</title>
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
    <script src='https://api.mapbox.com/mapbox-gl-js/v2.10.0/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v2.10.0/mapbox-gl.css' rel='stylesheet' />
    <script src="js/jquery-3.6.0.js"></script>
    <script src="js/keys.js"></script>
    <link rel="stylesheet" href="css/weather.css">
    <style>
        body { margin: 0; padding: 0; }
        #map {
            /* the width and height may be set to any size */
            position: absolute;
            top: 0;
            bottom: 0;
            width: 40%;
            height: 200px;
            border-radius: 20px;
        }
    </style>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
</head>
<body>
<script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.0/mapbox-gl-geocoder.min.js"></script>
<link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.0/mapbox-gl-geocoder.css" type="text/css">
<div id='map'></div>
<script>
    mapboxgl.accessToken = 'pk.eyJ1IjoiYnJpdHRuZXliOTUiLCJhIjoiY2w5b2YzbnJ4MGd3bDNwcXAybmI2cGp2biJ9.UZHsmkRO2W6YUG4leShgFA';
    const map = new mapboxgl.Map({
        container: 'map', // container ID
        style: 'mapbox://styles/mapbox/streets-v11', // style URL
        center: [-80.843124, 35.227085], // starting position [lng, lat]
        zoom: 9, // starting zoom
        projection: 'globe' // display the map as a 3D globe
    });
    // Refer to your Mapbox API exercise. Recreate the map below your 5 day forecast. Read through the documentation for the Mapbox API and figure out how to allow the user to drop a pin on any place on the map. Once the user drops a pin, grab its coordinates and feed those into your OpenWeatherMap API. Update the five-day forecast with the information from those coordinates (you should also get rid of your input boxes at this point).
    map.addControl(
        new MapboxGeocoder({
            accessToken: mapboxgl.accessToken,
            mapboxgl: mapboxgl
        })
    );
    map.on('style.load', () => {
        map.setFog({}); // Set the default atmosphere style
    });
    // Set marker options.
    // const marker = new mapboxgl.Marker({
    //     color: "#FFFFFF",
    //     draggable: true
    // }).setLngLat([30.5, 50.5])
    //     .addTo(map);
    // event below gives the coordinates of where the user clicked. Now I need to reference it in object notation.
    map.on('click', (e) => {
        e.preventDefault();
        const marker = new mapboxgl.Marker({
            color: "#FFFFFF",
            draggable: true
         }).setLngLat([e.lngLat.lng, e.lngLat.lat])             // object properties being fed into the event
            .addTo(map);
        console.log(e);
    $.get("http://api.openweathermap.org/data/2.5/forecast", {
        APPID: weatherKey,
        lat:    e.lngLat.lat,
        lon:    e.lngLat.lng,
        units: "imperial"
    }).done(function(data) {
        console.log('5 day forecast', data);
                                                        // feed coordinates into call for weather map
        })
    });
</script>
<!--Weather Display  -->
<div id="circle">
    <input type="radio" name="position" checked />
    <input type="radio" name="position" />
    <input type="radio" name="position" />
    <input type="radio" name="position" />
    <input type="radio" name="position" />
    <main id="carousel">
        <div class="item" ><p id="description"></p></div>
       <div class="item"></div>                              <!--   use UL to display weather data with appending and Jquery or DOM-->
        <div class="item" ></div>
        <div class="item"></div>
        <div class="item"></div>
        <main>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
</body>
</html>